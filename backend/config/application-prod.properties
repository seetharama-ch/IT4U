server.port=8060
server.forward-headers-strategy=framework

# Security Logging (Probe for correct baseUrl resolution)
# Security Logging (Probe for correct baseUrl resolution)
logging.level.org.springframework.security=DEBUG
logging.level.com.gsg.it4u=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security.oauth2=DEBUG
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when_authorized

info.app.name=IT4U
info.app.version=1.4.0
info.env=prod

# Postgres Configuration for Prod
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/it4u}
spring.datasource.username=${DB_USERNAME:it4u_user}
spring.datasource.password=${DB_PASSWORD:Geosoft@1234}
spring.datasource.driverClassName=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.flyway.baseline-on-migrate=true

# Security / SSO Claims
# Security / SSO Claims
spring.security.oauth2.client.registration.azure.client-id=${AZURE_CLIENT_ID:dummy-id}
spring.security.oauth2.client.registration.azure.client-secret=${AZURE_CLIENT_SECRET:dummy-secret}
spring.security.oauth2.client.registration.azure.scope=openid,profile,email
spring.security.oauth2.client.registration.azure.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.azure.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.provider.azure.issuer-uri=https://login.microsoftonline.com/${AZURE_TENANT_ID}/v2.0
spring.security.oauth2.client.provider.azure.user-name-attribute=preferred_username

# Notification Settings - Enforce Environment Variables (No Defaults)
notifications.email-enabled=true
notifications.it-support-group=${NOTIFICATIONS_IT_SUPPORT_GROUP:it-support@geosoftglobal.com}
notifications.admin-group=${NOTIFICATIONS_ADMIN_GROUP:admin@geosoftglobal.com}
notifications.sender-address=it4u-notify@geosoftglobal.com

# New Mail Logic Config
it4u.mail.enabled=true
it4u.mail.from=it4u@geosoftglobal.com
it4u.mail.cc.itSupport=${NOTIFICATIONS_IT_SUPPORT_GROUP:it_support@geosoftglobal.com}
it4u.mail.cc.admin=${NOTIFICATIONS_ADMIN_GROUP:admin@geosoftglobal.com}
it4u.mail.thread.domain=it4u.geosoftglobal.com
it4u.mail.subject.prefix=[IT4U]
it4u.app.url=http://localhost:8060

# Mail Reliability
# Mail (Microsoft 365 SMTP)
spring.mail.host=smtp.office365.com
spring.mail.port=587
spring.mail.username=it4u-notify@geosoftglobal.com
spring.mail.password=${MAIL_PASSWORD:dummy_password}

spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=10000
spring.mail.properties.mail.smtp.timeout=10000
spring.mail.properties.mail.smtp.writetimeout=10000

spring.mail.properties.mail.smtp.ssl.trust=smtp.office365.com
